Express-додаток для роботи з колекцією нотаток

Фільтрація

Використовуючи текстовий індекс MongoDB додайте можливість фільтрування колекції нотаток до маршруту GET /notes за тегом та текстом через параметри рядка запиту:

tag - один із можливих тегів нотатки. Список всіх можливих тегів буде надано далі.
search - будь-який текст для пошуку у нотатках по властивостям title та content.


Приклад GET запиту буде виглядати наступним чином:

http://localhost:3030/notes?tag=Todo&search=hello


У разі вдалої обробки запиту відповідь сервера має бути зі статусом 200 та містити об’єкт із властивістю notes - масив нотаток:

{
  notes: [/* масив нотаток */]
}

Список можливих тегів, який раніше у вас був описаний у файлі src/models/note.js, винесіть в окремий файл src/constants/tags.js, оскільки він вам знадобиться тепер не лише для опису моделі, а і для майбутньої валідації. А поки що використовуйте значення тегів для того, щоб протестувати роботу вашого коду через Postman.

// src/constants/tags.js

export const TAGS = [
  'Work',
  'Personal',
  'Meeting',
  'Shopping',
  'Ideas',
  'Travel',
  'Finance',
  'Health',
  'Important',
  'Todo'
];

===============================================================================

Пагінація

Додайте можливість пагінації до маршруту GET /notes через параметри рядка запиту:

page - номер сторінки запиту (за замовчуванням 1)
perPage - кількість елементів на сторінці (за замовчуванням 10)


Приклад GET запиту буде виглядати наступним чином:

http://localhost:3030/notes?page=1&perPage=15&tag=Todo&search=hello

У разі вдалої обробки запиту відповідь сервера має бути зі статусом 200 та містити об’єкт із наступними властивостями:

page - поточна сторінка
perPage - кількість елементів в одній сторінці
totalNotes - загальна кількість нотаток в колекції
totalPages - загальна кількість сторінок
notes - масив нотаток

{
  page: 1
  perPage: 15,
  totalNotes: 150,
  totalPages: 10,
  notes: [/* масив нотаток */]
}

===============================================================================
### Заняття 5. Валідація


- Валідація

- Додайте валідацію вхідних даних за допомогою бібліотеки celebrate.

- Схеми валідації створіть в файлі src/validations/notesValidation.js.
- Використайте схеми валідації в файлі src/routes/notesRoutes.js, щоб додати middleware-валідації до маршрутів. Обробники маршрутів мають використовувати `celebrate(schema)` як middleware.
- Додайте обробку помилок валідації від пакета celebrate у файл server.js.


- Для маршруту GET /notes потрібно валідувати параметри рядка запиту:

+ page - ціле число, мінімальне значення 1, за замовчуванням 1.
+ perPage - ціле число, мінімальне значення 5, максимальне 20, за замовчуванням 10.
tag - рядок, одне із можливих значень із файла src/contacts/tags.js, необов’язкове поле
search - рядок, можливо передавати порожній рядок


+ Для цього створіть схему валідації getAllNotesSchema (не змінюйте назву) у файлі src/validations/notesValidation.js.

-----------------------------------------------------------------------------

- Для маршруту GET /notes/:noteId потрібно валідувати параметр запиту noteId:

noteId - валідуємо як рядок із кастомною валідацію через isValidObjectId із mongoose.

Для цього створіть схему валідації noteIdSchema (не змінюйте назву) у файлі src/validations/notesValidation.js.

-----------------------------------------------------------------------------

Для маршруту DELETE /notes/:noteId потрібно валідувати параметр запиту noteId:

noteId - валідуємо як рядок із кастомною валідацію через isValidObjectId із mongoose.

Для цього використайте схему валідації noteIdSchema (не змінюйте назву) у файлі src/validations/notesValidation.js.

-----------------------------------------------------------------------------

Для маршруту POST /notes потрібно валідувати тіло запиту як об’єкт із наступними властивостями:

title - рядок, мінімум 1 символ, обов’язкове поле
content - рядок, може бути порожнім рядком, необов’язкове поле
tag - одне зі значень із файла src/contacts/tags.js, необов’язкове поле.

Для цього створіть схему валідації createNoteSchema (не змінюйте назву) у файлі src/validations/notesValidation.js.

-----------------------------------------------------------------------------

Для маршруту PATCH /notes/:noteId потрібно валідувати параметр запиту noteId (валідуємо як рядок із кастомною валідацію через isValidObjectId із mongoose) та тіло запиту як об’єкт із наступними властивостями:

title - рядок, мінімум 1 символ, необов’язкове поле
content - рядок, може бути порожнім рядком, необов’язкове поле
tag - одне із значень із файла src/contacts/tags.js, необов’язкове поле

Додайте перевірку, що хоча б одне з полів `title`, `content` або `tag` буде присутнім, тобто тіло запиту не має бути порожнім. Для цього створіть схему валідації updateNoteSchema (не змінюйте назву) у файлі src/validations/notesValidation.js та використайте noteIdSchema.

Зверніть увагу: обидві частини валідації (параметри маршруту та тіло запиту) потрібно реалізувати в одній схемі updateNoteSchema.
